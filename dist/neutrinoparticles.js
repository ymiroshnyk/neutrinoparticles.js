var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(p,f,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");p!=Array.prototype&&p!=Object.prototype&&(p[f]=a.value)};$jscomp.getGlobal=function(p){return"undefined"!=typeof window&&window===p?p:"undefined"!=typeof global&&null!=global?global:p};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(p,f,a,b){if(f){a=$jscomp.global;p=p.split(".");for(b=0;b<p.length-1;b++){var c=p[b];c in a||(a[c]={});a=a[c]}p=p[p.length-1];b=a[p];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(a,p,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Number.EPSILON",function(p){return Math.pow(2,-52)},"es6-impl","es3");
function NeutrinoParticles(){function p(a){return 16>a?"0"+a.toString(16):a.toString(16)}var f=this;this.equalv3_=function(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};this.equalq_=function(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};this.a=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1]};this.b=function(a,b){return[a[0]+b[0],a[1]+b[1]]};this.y=function(a,b,c){a[0]=b[0]+c;a[1]=b[1]+c};this.z=function(a,b){return[a[0]+b,a[1]+b]};this.c=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];
a[2]=b[2]+c[2]};this.d=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2]]};this.C=function(a,b,c){a[0]=b[0]+c;a[1]=b[1]+c;a[2]=b[2]+c};this.D=function(a,b){return[a[0]+b,a[1]+b,a[2]+b]};this.addq=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3]};this.addq_=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]};this.e=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1]};this.f=function(a,b){return[a[0]-b[0],a[1]-b[1]]};this.A=function(a,b,c){a[0]=b[0]-c;a[1]=b[1]-c};this.B=
function(a,b){return[a[0]-b,a[1]-b]};this.nf=function(a,b,c){a[0]=b-c[0];a[1]=b-c[1]};this.of=function(a,b){return[a-b[0],a-b[1]]};this.g=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2]};this.h=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]};this.E=function(a,b,c){a[0]=b[0]-c;a[1]=b[1]-c;a[2]=b[2]-c};this.F=function(a,b){return[a[0]-b,a[1]-b,a[2]-b]};this.rf=function(a,b,c){a[0]=b-c[0];a[1]=b-c[1];a[2]=b-c[2]};this.sf=function(a,b){return[a-b[0],a-b[1],a-b[2]]};this.i=function(a,
b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1]};this.j=function(a,b){return[a[0]*b[0],a[1]*b[1]]};this.k=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2]};this.l=function(a,b){return[a[0]*b[0],a[1]*b[1],a[2]*b[2]]};this.m=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1]};this.n=function(a,b){return[a[0]/b[0],a[1]/b[1]]};this.o=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2]};this.p=function(a,b){return[a[0]/b[0],a[1]/b[1],a[2]/b[2]]};this.H=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*
b[2]};this.dotq_=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};this.q=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c};this.r=function(a,b){return[a[0]*b,a[1]*b]};this.s=function(a,b,c){a[0]=b[0]/c;a[1]=b[1]/c};this.t=function(a,b){return[a[0]/b,a[1]/b]};this.u=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c};this.v=function(a,b){return[a[0]*b,a[1]*b,a[2]*b]};this.w=function(a,b,c){a[0]=b[0]/c;a[1]=b[1]/c;a[2]=b[2]/c};this.x=function(a,b){return[a[0]/b,a[1]/b,a[2]/b]};this.y=function(a,
b,c){a[0]=b[0]+c;a[1]=b[1]+c};this.z=function(a,b){return[a[0]+b,a[1]+b]};this.A=function(a,b,c){a[0]=b[0]-c;a[1]=b[1]-c};this.B=function(a,b){return[a[0]-b,a[1]-b]};this.G=function(a,b){return a[0]*b[0]+a[1]*b[1]};this.H=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};this.I=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],m=c[1];c=c[2];a[0]=e*c-b*m;a[1]=b*f-d*c;a[2]=d*m-e*f};this.J=function(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],m=b[1],n=b[2];return[d*n-e*m,e*f-c*n,c*m-d*f]};this.K=function(a){return Math.sqrt(a[0]*
a[0]+a[1]*a[1])};this.L=function(a){return a[0]*a[0]+a[1]*a[1]};this.M=function(a,b){f.q(a,b,1/f.K(b))};this.N=function(a){return f.r(a,1/f.K(a))};this.O=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])};this.P=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]};this.Q=function(a,b){f.u(a,b,1/f.O(b))};this.R=function(a){return f.v(a,1/f.O(a))};this.S=function(a,b){a[0]=b[0];a[1]=b[1]};this.T=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]};this.U=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=
b[3]};this.V=function(a,b,c){a[0]=b;a[1]=c};this.W=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d};this.X=function(a,b,c){return a+(b-a)*c};this.Y=function(a,b,c,d){a[0]=b[0]+(c[0]-b[0])*d;a[1]=b[1]+(c[1]-b[1])*d};this.Z=function(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c]};this.ab=function(a,b,c,d){a[0]=b[0]+(c[0]-b[0])*d;a[1]=b[1]+(c[1]-b[1])*d;a[2]=b[2]+(c[2]-b[2])*d};this.bb=function(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c,a[2]+(b[2]-a[2])*c]};this.slerpq=function(a,b,c,d){var e=
f.dotq_(b,c),r=[];0>e?(f.negq(r,c),e=-e):f.U(r,c);1-e<Number.EPSILON?(a[0]=f.X(b[0],c[0],d),a[1]=f.X(b[1],c[1],d),a[2]=f.X(b[2],c[2],d),a[3]=f.X(b[3],c[3],d)):(c=f.acos_(e),f.mulqscalar(a,f.addq_(f.mulqscalar_(b,f.sin_((1-d)*c)),f.mulqscalar_(r,f.sin_(d*c))),1/f.sin_(c)))};this.slerpq_=function(a,b,c){var d=[];slerpq(d,a,b,c);return d};this.acos_=function(a){return Math.acos(a)};this.sin_=function(a){return Math.sin(a)};this.cos_=function(a){return Math.cos(a)};this.taus88=function(a){a||(a=0);var b,
c,d;this.seed=function(a){a&=4294967295;b=2>a?a+2:a;c=8>a?a+8:a;d=16>a?a+16:a};this.rand=function(){var a=((b<<13^b)&4294967295)>>>19;b=((b&4294967294)<<12^a)>>>0;a=((c<<2^c)&4294967295)>>>25;c=((c&4294967288)<<4^a)>>>0;a=((d<<3^d)&4294967295)>>>11;d=((d&4294967280)<<17^a)>>>0;return((b^c^d)>>>0)/4294967296};this.seed(a)};this.cb=function(a,b){this.randv2gen(a,b,function(){return Math.random()})};this.randv2gen=function(a,b,c){c=c()*Math.PI*2;a[0]=b*f.cos_(c);a[1]=b*f.sin_(c)};this.db=function(a,
b){this.randv3gen(a,b,function(){return Math.random()})};this.randv3gen=function(a,b,c){var d=c()*Math.PI*2;c=-1+2*c();var e=b*Math.sqrt(1-c*c);a[0]=e*f.cos_(d);a[1]=e*f.sin_(d);a[2]=b*c};this.yb=function(a,b,c,d,e){b+=e()*d[0];c+=e()*d[1];f.V(a,b,c)};this.eb=function(a,b){f.V(-b[0],-b[1])};this.fb=function(a){return[-a[0],-a[1]]};this.gb=function(a,b){f.W(-b[0],-b[1],-b[2])};this.hb=function(a){return[-a[0],-a[1],-a[2]]};this.negq=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3]};this.negq_=
function(a){return[-a[0],-a[1],-a[2],-a[3]]};this.ib=function(a){return a/180*Math.PI};this.jb=function(a){return a/Math.PI*180};this.Ae=function(a){return 0>a?-1:1};this.ob=function(a,b,c,d){var e=2*d[0]*d[0],f=2*d[1]*d[1],m=2*d[2]*d[2],n=2*d[0]*d[1],t=2*d[0]*d[2],g=2*d[1]*d[2],k=2*d[3]*d[2],B=2*d[3]*d[1];d=2*d[3]*d[0];a[0]=1-f-m;a[1]=n+k;a[2]=t-B;b[0]=n-k;b[1]=1-e-m;b[2]=g+d;c[0]=t+B;c[1]=g-d;c[2]=1-e-f};this.axes2quat=this.pb=function(a,b,c,d){var e=b[0]+c[1]+d[2];0<e?(e=2*Math.sqrt(e+1),a[3]=
.25*e,a[0]=(c[2]-d[1])/e,a[1]=(d[0]-b[2])/e,a[2]=(b[1]-c[0])/e):b[0]>c[1]&b[0]>d[2]?(e=2*Math.sqrt(1+b[0]-c[1]-d[2]),a[3]=(c[2]-d[1])/e,a[0]=.25*e,a[1]=(b[1]+c[0])/e,a[2]=(d[0]+b[2])/e):c[1]>d[2]?(e=2*Math.sqrt(1+c[1]-b[0]-d[2]),a[3]=(d[0]-b[2])/e,a[0]=(b[1]+c[0])/e,a[1]=.25*e,a[2]=(c[2]+d[1])/e):(e=2*Math.sqrt(1+d[2]-b[0]-c[1]),a[3]=(b[1]-c[0])/e,a[0]=(d[0]+b[2])/e,a[1]=(c[2]+d[1])/e,a[2]=.25*e)};this.axisangle2quat=this.qb=function(a,b,c){c=.5*f.ib(c);var d=Math.sin(c);a[0]=b[0]*d;a[1]=b[1]*d;a[2]=
b[2]*d;a[3]=Math.cos(c)};this.axisangle2quat_=this.axisangle2quat_=function(a,b){var c=.5*f.ib(b),d=Math.sin(c);return[a[0]*d,a[1]*d,a[2]*d,f.cos_(c)]};this.rb=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var m=c[1],n=c[2];c=c[3];var t=c*d+m*f-n*e,g=c*e+n*d-b*f,k=c*f+b*e-m*d,d=-b*d-m*e-n*f;a[0]=t*c+d*-b+g*-n-k*-m;a[1]=g*c+d*-m+k*-b-t*-n;a[2]=k*c+d*-n+t*-m-g*-b};this.sb=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var m=c[0],n=c[1],t=c[2];c=c[3];a[0]=d*c+b*m+e*t-f*n;a[1]=e*c+b*n+f*m-d*t;a[2]=
f*c+b*t+d*n-e*m;a[3]=b*c-d*m-e*n-f*t};this.mulqscalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c};this.mulqscalar_=function(a,b){return[a[0]*b,a[1]*b,a[2]*b,a[3]*b]};this.tb=function(a,b,c,d,e){var r=f.ib(c);c=Math.cos(r)*d;d*=Math.sin(r);a[0]=b[0]+c*e[0]-d*e[1];a[1]=b[1]+d*e[0]+c*e[1]};this.ub=function(a,b,c,d,e){var r=f.ib(c);c=Math.cos(r)/d;d=Math.sin(r)/d;a[0]=c*e[0]+d*e[1]-b[0]*c-b[1]*d;a[1]=c*e[1]-d*e[0]+b[0]*d-b[1]*c};this.vb=function(a){return 0>a?Math.floor(f.yd-1+a%
f.yd):Math.floor(a%f.yd)};this.ff=function(a){return"#"+p(Math.floor(255*a[0]))+p(Math.floor(255*a[1]))+p(Math.floor(255*a[2]))};this.tf=function(a,b,c,d,e,r){var m=f.f(d,a);a=f.f(e,a);c=f.r(b,c);if(m[0]<-c[0]&&a[0]<-c[0]||m[0]>c[0]&&a[0]>c[0]||m[1]<-c[1]&&a[1]<-c[1]||m[1]>c[1]&&a[1]>c[1])return!1;if(m[0]<=c[0]&&m[0]>=-c[0]&&m[1]<=c[1]&&m[1]>=-c[1])return!0;if(1E-6>r)return!1;if(a[0]<=c[0]&&a[0]>=-c[0]&&a[1]<=c[1]&&a[1]>=-c[1])return!0;d=f.f(e,d);f.s(d,d,r);r=[-d[1],d[0]];d=Math.abs(f.G(r,a));if(Math.abs(f.G(r,
c))>=d){if(b=[-b[1],b[0]],0>=f.G(b,m)*f.G(b,a))return!0}else if(Math.abs(f.G(r,[c[0],-c[1]]))>=d&&(b=[b[1],b[0]],0>=f.G(b,m)*f.G(b,a)))return!0;return!1};this.uf=function(a,b,c,d,e,r,m){var n=f.f(d,a);a=f.f(e,a);c=f.r(b,c);if(1E-6>r||n[0]<-c[0]&&a[0]<-c[0]||n[0]>c[0]&&a[0]>c[0]||n[1]<-c[1]&&a[1]<-c[1]||n[1]>c[1]&&a[1]>c[1])return!1;d=f.f(e,d);f.s(d,d,r);r=[-d[1],d[0]];d=Math.abs(f.G(r,a));if(m){if(Math.abs(f.G(r,c))>=d&&(b=[-b[1],b[0]],0>=f.G(b,n)*f.G(b,a)))return!0}else if(Math.abs(f.G(r,[c[0],-c[1]]))>=
d&&(b=[b[1],b[0]],0>=f.G(b,n)*f.G(b,a)))return!0;return!1};this.wb=function(a,b,c,d){b=3*(c*f.yd+b);d=f.zd[d];a[0]=d.getUint8(b);a[1]=d.getUint8(b+1);a[2]=d.getUint8(b+2)};this.xb=function(a,b){if(null==f.zd)f.W(a,128,128,128);else{var c=b[0]*f.yd,d=b[1]*f.yd,e=b[2]*f.yd,r=Math.floor(c),m=Math.floor(d),n=Math.floor(e),c=c-r,d=d-m,e=e-n,t=f.vb(r),g=f.vb(r+1),k=f.vb(m),B=f.vb(m+1),p=f.vb(n),E=f.vb(n+1),n=[],m=[],r=[],F=[],H=[],J=[],I=[],K=[];f.wb(n,t,k,p);f.wb(m,t,k,E);f.wb(r,t,B,p);f.wb(F,t,B,E);f.wb(H,
g,k,p);f.wb(J,g,k,E);f.wb(I,g,B,p);f.wb(K,g,B,E);t=[];g=[];k=[];B=[];f.ab(t,n,m,e);f.ab(g,r,F,e);f.ab(k,H,J,e);f.ab(B,I,K,e);e=[];n=[];f.ab(e,t,g,d);f.ab(n,k,B,d);f.ab(a,e,n,c)}};this.ImageDesc=function(a,b,c,d,e){this.image=a;this.x=b;this.y=c;this.width=d;this.height=e};this.RenderCall=function(a,b,c){this.startIndex=a;this.numIndices=b;this.renderStyleIndex=c};this.SubRect=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};this.Camera2D=function(){};this.Camera2D.prototype.tb=function(a,
b){return!0};this.Camera3D=function(a,b){this.Qd=f.r(a,.5);this.z=-(.5*a[0])/Math.tan(f.ib(.5*b))};this.Camera3D.prototype.transform=function(a,b){if(a[2]<this.z)return!1;var c=-this.z/(a[2]-this.z);f.a(a,f.r(f.f(a,this.Qd),c),this.Qd);f.q(b,b,c);return!0};this.zd=null;this.yd=0;this.initializeNoise=function(a,b,c){a||alert("path should be defined");if(null!=this.zd)b();else{if(null==a||void 0==a)a=this.defaultPath;var d=new XMLHttpRequest;d.open("GET",a+"neutrinoparticles.noise.bin",!0);d.responseType=
"arraybuffer";d.ctx=this;d.onreadystatechange=function(){if(4==d.readyState)if(200<=d.status&&300>d.status||304==d.status){var a=d.response,f=d.ctx,m=(new DataView(a,0,4)).getUint32(0,!0);f.zd=[];f.yd=m;for(var n=0;n<m;++n)f.zd[n]=new DataView(a,4+3*m*m*n);b&&b()}else c&&c()};d.send()}};this.NoiseGenerator=function(){for(var a=function(a,b,c,d,e){return.5*(2*b+(-a+c)*e+(2*a-5*b+4*c-d)*e*e+(-a+3*b-3*c+d)*e*e*e)},b=function(b,c,d,e,f){return[a(b[0],c[0],d[0],e[0],f),a(b[1],c[1],d[1],e[1],f),a(b[2],
c[2],d[2],e[2],f)]},c=function(a,b,c){return a<b?b:a>c?c:a},d=[],e=[],r=new f.taus88(120),m=.7,n=64,t,g,k,p,L,E,F,H=0,J=0,I=n>>>1;0<I;I>>>=1)var K=Math.floor(64/I),H=H+K*K;var G=0;this.progress=0;this.step=function(){switch(G){case 0:for(var a=0;64>a;++a)for(var h=d[a]=[],q=0;64>q;++q)for(var v=h[q]=[],l=0;64>l;++l)v[l]=[0,0,0];G=1;this.progress=.01;break;case 1:t=n>>>1;g=Math.floor(64/t);k=g*g;p=Math.max(g-1,1);L=g*g*g;for(a=F=E=0;a<L;++a)e[a]=[],e[a][2]=2*r.rand()-1,e[a][1]=2*r.rand()-1,e[a][0]=
2*r.rand()-1;G=2;break;case 2:for(a=0;a<g;++a)for(var h=E-1>>>0&p,q=E>>>0&p,v=E+1>>>0&p,l=E+2>>>0&p,w=F-1>>>0&p,x=F>>>0&p,u=F+1>>>0&p,C=F+2>>>0&p,D=a-1>>>0&p,y=a>>>0&p,z=a+1>>>0&p,A=a+2>>>0&p,h=[[[e[h*k+w*g+D],e[h*k+w*g+y],e[h*k+w*g+z],e[h*k+w*g+A]],[e[h*k+x*g+D],e[h*k+x*g+y],e[h*k+x*g+z],e[h*k+x*g+A]],[e[h*k+u*g+D],e[h*k+u*g+y],e[h*k+u*g+z],e[h*k+u*g+A]],[e[h*k+C*g+D],e[h*k+C*g+y],e[h*k+C*g+z],e[h*k+C*g+A]]],[[e[q*k+w*g+D],e[q*k+w*g+y],e[q*k+w*g+z],e[q*k+w*g+A]],[e[q*k+x*g+D],e[q*k+x*g+y],e[q*k+
x*g+z],e[q*k+x*g+A]],[e[q*k+u*g+D],e[q*k+u*g+y],e[q*k+u*g+z],e[q*k+u*g+A]],[e[q*k+C*g+D],e[q*k+C*g+y],e[q*k+C*g+z],e[q*k+C*g+A]]],[[e[v*k+w*g+D],e[v*k+w*g+y],e[v*k+w*g+z],e[v*k+w*g+A]],[e[v*k+x*g+D],e[v*k+x*g+y],e[v*k+x*g+z],e[v*k+x*g+A]],[e[v*k+u*g+D],e[v*k+u*g+y],e[v*k+u*g+z],e[v*k+u*g+A]],[e[v*k+C*g+D],e[v*k+C*g+y],e[v*k+C*g+z],e[v*k+C*g+A]]],[[e[l*k+w*g+D],e[l*k+w*g+y],e[l*k+w*g+z],e[l*k+w*g+A]],[e[l*k+x*g+D],e[l*k+x*g+y],e[l*k+x*g+z],e[l*k+x*g+A]],[e[l*k+u*g+D],e[l*k+u*g+y],e[l*k+u*g+z],e[l*
k+u*g+A]],[e[l*k+C*g+D],e[l*k+C*g+y],e[l*k+C*g+z],e[l*k+C*g+A]]]],q=0;q<t;++q)for(l=q/t,v=E*t+q,l=[[b(h[0][0][0],h[1][0][0],h[2][0][0],h[3][0][0],l),b(h[0][0][1],h[1][0][1],h[2][0][1],h[3][0][1],l),b(h[0][0][2],h[1][0][2],h[2][0][2],h[3][0][2],l),b(h[0][0][3],h[1][0][3],h[2][0][3],h[3][0][3],l)],[b(h[0][1][0],h[1][1][0],h[2][1][0],h[3][1][0],l),b(h[0][1][1],h[1][1][1],h[2][1][1],h[3][1][1],l),b(h[0][1][2],h[1][1][2],h[2][1][2],h[3][1][2],l),b(h[0][1][3],h[1][1][3],h[2][1][3],h[3][1][3],l)],[b(h[0][2][0],
h[1][2][0],h[2][2][0],h[3][2][0],l),b(h[0][2][1],h[1][2][1],h[2][2][1],h[3][2][1],l),b(h[0][2][2],h[1][2][2],h[2][2][2],h[3][2][2],l),b(h[0][2][3],h[1][2][3],h[2][2][3],h[3][2][3],l)],[b(h[0][2][0],h[1][3][0],h[2][3][0],h[3][3][0],l),b(h[0][2][1],h[1][3][1],h[2][3][1],h[3][3][1],l),b(h[0][2][2],h[1][3][2],h[2][3][2],h[3][3][2],l),b(h[0][2][3],h[1][3][3],h[2][3][3],h[3][3][3],l)]],w=0;w<t;++w)for(y=w/t,x=F*t+w,u=b(l[0][0],l[1][0],l[2][0],l[3][0],y),C=b(l[0][1],l[1][1],l[2][1],l[3][1],y),D=b(l[0][2],
l[1][2],l[2][2],l[3][2],y),y=b(l[0][3],l[1][3],l[2][3],l[3][3],y),z=0;z<t;++z){var A=a*t+z,B=b(u,C,D,y,z/t),B=f.d(f.v(B,m),d[v][x][A]),B=[c(B[0],-1,1),c(B[1],-1,1),c(B[2],-1,1)];d[v][x][A]=B}J++;this.progress=.01+J/H*.89;F++;F>=g&&(F=0,E++,E>=g&&(E=0,n=t,m=Math.pow(m,1.2),1>=n?(G=3,this.progress=.9):G=1));break;case 3:a=[-1,-1,-1];h=[.5,.7,1];for(q=0;64>q;++q)for(v=d[q],l=0;64>l;++l)for(w=v[l],x=0;64>x;++x)u=w[x],u[0]=f.X(a[0],h[0],.5*u[0]+.5),u[1]=f.X(a[1],h[1],.5*u[1]+.5),u[2]=f.X(a[2],h[2],.5*
u[2]+.5);G=4;this.progress=.95;break;case 4:f.yd=64;f.zd=[];for(a=0;64>a;++a){h=d[a];q=new ArrayBuffer(12288);q=new DataView(q);for(v=0;64>v;++v)for(l=h[v],w=0;64>w;++w)x=l[w],u=3*(64*v+w),q.setUint8(u+0,Math.floor(c(256*(.5*x[0]+.5)-.5,0,255))),q.setUint8(u+1,Math.floor(c(256*(.5*x[1]+.5)-.5,0,255))),q.setUint8(u+2,Math.floor(c(256*(.5*x[2]+.5)-.5,0,255)));f.zd[a]=q}G=5;this.progress=1}return 5==G}};this.cf=document.createElement("canvas");this.cf.width=0;this.cf.height=0;this.bf=this.cf.getContext("2d");
this.af=function(a,b){if(this.cf.width<a||this.cf.height<b)this.cf.width=a,this.cf.height=b,this.bf=this.cf.getContext("2d")};this.effects=[];this.loadEffect=function(a,b,c){if(void 0!=this.effects[a]){var d=this.effects[a];d instanceof Array?d[d.length]=[b,c]:b(d)}else{this.effects[a]=[[b,c]];var e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType="text";e.ctx=this;e.onreadystatechange=function(){if(4==e.readyState){var b=this.ctx.effects[a];if(200<=e.status&&300>e.status||304==e.status){var c=
eval("(function(ctx) {\n"+e.responseText+"\nreturn new NeutrinoEffect(ctx);\n})(this.ctx);");this.ctx.effects[a]=c;b.forEach(function(a){a[0](c)})}else b.forEach(function(a){a[1]()})}};e.send()}};this.removeEffect=function(a){delete this.effects[a]}};
